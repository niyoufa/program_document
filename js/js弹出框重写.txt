<!-- 弹出框模态框1 -->
<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" id="alert_modal" aria-hidden="true" style="display: none;" data-backdrop='static'>
	<div class="modal-dialog modal-sm" style="width:350px;height:200px;">
		<div class="modal-content" style="top:100px;">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
				<h4 class="modal-title" id="alert_modal_title" style="text-align: center;"><a href="#"><i class="glyphicon glyphicon-tree-deciduous"></i></a>云前台温馨提示</h4>
			</div>

			<div class="modal-body">
				<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
				<span class="glyphicon-class" id="alert_modal_body">请输入客户群名称</span>
			</div>
		</div>
	</div>
</div>

<!-- 弹出框模态框2 -->
<div id="ycf-alert" class="modal" >
	<div class="modal-dialog modal-sm">
		<div class="modal-content" style="top:100px;">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">
					<span aria-hidden="true">×</span><span class="sr-only">Close</span>
				</button>
				<h4 class="modal-title" id="alert_modal_title" style="text-align: center;"><a href="#"><i class="glyphicon glyphicon-tree-deciduous"></i></a>云前台温馨提示</h4>
			</div>
			<div class="modal-body small">
				<p>[Message]</p>
			</div>
			<div class="modal-footer" >
				<button type="button" class="btn btn-primary ok" data-dismiss="modal">[BtnOk]</button>
				<button type="button" class="btn btn-default cancel" data-dismiss="modal">[BtnCancel]</button>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">

	//关闭时恢复 modal html 原样，供下次调用时 replace 用
		//var _init = function () {
		//	alr.on("hidden.bs.modal", function (e) {
		//		$(this).html(ahtml);
		//	});
		//}();

		/* html 复原不在 _init() 里面做了，重复调用时会有问题，直接在 _alert/_confirm 里面做 */
		
	//alert弹出框
	window.alert = function () {
		var reg = new RegExp("\\[([^\\[\\]]*?)\\]", 'igm');
		var alr = $("#ycf-alert");
		var ahtml = alr.html();

		var _alert = function (options) {
			alr.html(ahtml);	// 复原
			alr.find('.ok').removeClass('btn-success').addClass('btn-primary');
			alr.find('.cancel').hide();
			_dialog(options);

			return {
				on: function (callback) {
					if (callback && callback instanceof Function) {
						alr.find('.ok').click(function () { callback(true) });
					}
				}
			};
		};

		var _dialog = function (options) {
			var ops = {
				msg: "提示内容",
				title: "操作提示",
				btnok: "确定",
				btncl: "取消"
			};


			console.log(alr);

			var html = alr.html().replace(reg, function (node, key) {
				return {
					Title: ops.title,
					Message: options,
					BtnOk: ops.btnok,
					BtnCancel: ops.btncl
				}[key];
			});

			alr.html(html);
			alr.modal({
			width: 500,
			backdrop: 'static'
			});
		}

		return _alert ; 

	}();
	//confirm 弹出框
	window.confirm = function () {
		var reg = new RegExp("\\[([^\\[\\]]*?)\\]", 'igm');
		var alr = $("#ycf-alert");
		var ahtml = alr.html();

		var _confirm = function (options) {
			alr.html(ahtml); // 复原
			alr.find('.ok').removeClass('btn-primary').addClass('btn-success');
			alr.find('.cancel').show();
			_dialog(options);

			return {
				on: function (callback) {
					if (callback && callback instanceof Function) {
						alr.find('.ok').click(function () { callback(true) });
						alr.find('.cancel').click(function () { callback(false) });
					}
				}
			};
		};

		var _dialog = function (options) {
			var ops = {
				msg: "提示内容",
				title: "操作提示",
				btnok: "确定",
				btncl: "取消"
			};


			console.log(alr);

			var html = alr.html().replace(reg, function (node, key) {
				return {
					Title: ops.title,
					Message: options,
					BtnOk: ops.btnok,
					BtnCancel: ops.btncl
				}[key];
			});

			alr.html(html);
			alr.modal({
			width: 500,
			backdrop: 'static'
			});
		}

		return _confirm ; 

	}();
</script>